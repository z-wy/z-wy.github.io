<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  <meta name="description" content="每个眼神都只身荒野">
  

  
  
  
  
  
  
  <title>zzzzzzzz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1．QoS技术QoS（服务质量）是网络的一种安全机制, 是一种用于解决网络延迟和阻塞等问题的技术，包括传输的带宽、传送的时延、数据的丢包率等。在网络中可以通过保证传输的带宽、降低传送的时延、降低数据的丢包率以及时延抖动等措施来提高服务质量。正常情况下，假如网络只用于特定的无时间限制的应用系统，比如Web应用、FTP应用等，那么它不需要QoS。当网络过载或拥塞时，QoS 可以确保重要业务量不受延迟或">
<meta property="og:type" content="article">
<meta property="og:title" content="zzzzzzzz">
<meta property="og:url" content="http://yoursite.com/2019/08/22/QoS技术/index.html">
<meta property="og:site_name" content="zzzzzzzz">
<meta property="og:description" content="1．QoS技术QoS（服务质量）是网络的一种安全机制, 是一种用于解决网络延迟和阻塞等问题的技术，包括传输的带宽、传送的时延、数据的丢包率等。在网络中可以通过保证传输的带宽、降低传送的时延、降低数据的丢包率以及时延抖动等措施来提高服务质量。正常情况下，假如网络只用于特定的无时间限制的应用系统，比如Web应用、FTP应用等，那么它不需要QoS。当网络过载或拥塞时，QoS 可以确保重要业务量不受延迟或">
<meta property="og:locale" content="ch">
<meta property="og:image" content="https://s2.ax1x.com/2019/09/04/nV9OpV.png">
<meta property="og:updated_time" content="2019-09-04T04:59:21.715Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zzzzzzzz">
<meta name="twitter:description" content="1．QoS技术QoS（服务质量）是网络的一种安全机制, 是一种用于解决网络延迟和阻塞等问题的技术，包括传输的带宽、传送的时延、数据的丢包率等。在网络中可以通过保证传输的带宽、降低传送的时延、降低数据的丢包率以及时延抖动等措施来提高服务质量。正常情况下，假如网络只用于特定的无时间限制的应用系统，比如Web应用、FTP应用等，那么它不需要QoS。当网络过载或拥塞时，QoS 可以确保重要业务量不受延迟或">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/09/04/nV9OpV.png">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="zzzzzzzz" rel="home">zzzzzzzz</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">aaaaaaa</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main"><article id="post-QoS技术" class="post-QoS技术 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/08/22/QoS技术/" data-id="ck04szqbq000704o0jtf7kwnc" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="1．QoS技术"><a href="#1．QoS技术" class="headerlink" title="1．QoS技术"></a>1．QoS技术</h2><p>QoS（服务质量）是网络的一种安全机制, 是一种用于解决网络延迟和阻塞等问题的技术，包括传输的带宽、传送的时延、数据的丢包率等。在网络中可以通过保证传输的带宽、降低传送的时延、降低数据的丢包率以及时延抖动等措施来提高服务质量。<br>正常情况下，假如网络只用于特定的无时间限制的应用系统，比如Web应用、FTP应用等，那么它不需要QoS。当网络过载或拥塞时，QoS 可以确保重要业务量不受延迟或丢弃，同时可以保证网络的高效运行。</p>
<a id="more"></a>

<h2 id="2．QoS服务模型"><a href="#2．QoS服务模型" class="headerlink" title="2．QoS服务模型"></a>2．QoS服务模型</h2><p>① Best-Effort服务模型：网络尽最大的可能性来发送报文，对时延、可靠性等性能不提供任何保证。<br>② Int-Serv服务模型：明确区分并保证每一个业务流的服务质量，为网络提供最细粒度化的服务质量区分。<br>③ Diff-Serv服务模型：多服务模型，可以满足不同的QoS需求。与Int-Serv不同，它不需要通知网络为每个业务预留资源。Diff-Serv根据每个报文指定的QoS来提供特定的服务。报文的QoS指定方法有多种，如IP包优先级位、报文源地址和目的地址等，网络通过这些信息来进行报文的分类、流量整形、流量监管和排队。Diff-Serv主要用于为一些重要的应用提供端到端的QoS。</p>
<h2 id="3．QoS的队列算法"><a href="#3．QoS的队列算法" class="headerlink" title="3．QoS的队列算法"></a>3．QoS的队列算法</h2><p>① FIFO：先进先出队列。FIFO不对报文进行分类，按报文到达接口的先后顺序进队，以进队的先后顺序出队。</p>
<p>② CQ：自定义排队。当在某个端口上配置CQ时，系统将会为这个端口维护17个输出队列，编号为0的队列是系统队列，用户可以指定队列1～16。系统在1～16队列之间循环，每个循环都从当前队列中取出预配置的字节总数，并在移动到下一队列前将这些数据包发送出去。CQ的缺点：CQ是静态配置的，不能自动适应网络情况的不断变化。</p>
<p>③ PQ：优先权排队。可以配置高（High）、中（Middle）、普通（Normal）、低（Low）四种通信优先级，优先权级别高的通信总会比优先权级别低的通信提前得到服务。</p>
<p>④ WFQ：加权公平排队。WFQ是一个自动的时序安排方法，对网络的所有通信提供了公平的带宽分配方案。WFQ为数据量少的通信提供比数据量大的通信更高的优先权，同时为并发的文件传输提供链路容量的平衡使用。</p>
<p>⑤ CBWFQ：基本类型的加权公平排队。CBWFQ能根据用户定义识别出某种类流，并为该条流分配一定的权重</p>
<h2 id="4．Qos的配置"><a href="#4．Qos的配置" class="headerlink" title="4．Qos的配置"></a>4．Qos的配置</h2><p>QoS配置的4个基本步骤：<br>① 设置ACL匹配应用流量。<br>② 设置class-map匹配相应ACL或者相应端口等。<br>③ 设置policy-map匹配class-map，然后定义规则动作。<br>④ 将policy-map绑定到相应的接口上。</p>
<p><a href="https://imgchr.com/i/nV9OpV" target="_blank" rel="noopener"><img src="https://s2.ax1x.com/2019/09/04/nV9OpV.png" alt="nV9OpV.png"></a></p>
<h5 id="（1）CBWFQ配置命令"><a href="#（1）CBWFQ配置命令" class="headerlink" title="（1）CBWFQ配置命令"></a>（1）CBWFQ配置命令</h5><table>
<thead>
<tr>
<th>命令格式</th>
<th>解释</th>
<th>配置模式</th>
</tr>
</thead>
<tbody><tr>
<td>fair-queue</td>
<td>设置端口的队列</td>
<td>接口配置模式</td>
</tr>
<tr>
<td>service-policy <policy name></policy></td>
<td>在端口上应用一个策略表</td>
<td></td>
</tr>
<tr>
<td>class-map <class-map name></class-map></td>
<td>创建一个分类表，并进入分类表模式</td>
<td>全局配置模式</td>
</tr>
<tr>
<td>policy-map <policy name></policy></td>
<td>创建一个策略表，并进入策略表模式</td>
<td></td>
</tr>
<tr>
<td>class <class-map name></class-map></td>
<td>建立一个分类表，并进入策略分类表模式</td>
<td></td>
</tr>
</tbody></table>
<p><code>Router(config)#class-map http_ftp  //创建名为http_ftp分类表，并进入分类表模式</code></p>
<p><code>Router(config-cmap)#match protocol http //匹配http协议</code></p>
<p><code>Router(config-cmap)#match protocol ftp  //匹配ftp协议建立</code></p>
<p><code>Router(config)#policy-map duilie //创建名为duilie的策略表，并进入策略表模式</code></p>
<p><code>Router(config-pmap)#class http_ftp //建立名为http_ftp分类表</code></p>
<p><code>Router(config-pmap-c)#bandwidth 512 //设置带宽为512</code></p>
<p><code>Router(config-pmap-c)#exit</code> </p>
<p><code>Router(config-pmap)#class class-default  //默认类</code></p>
<p><code>Router(config-pmap-c)#fair-queue      //设置端口队列</code></p>
<p><code>Router(config-pmap-c)#int f0/1</code></p>
<p><code>Router(config-if)#service-policy output duilie 应用队列策略</code></p>
<p><code>Router#show policy-map   //查看CBWFQ的配置情况</code></p>
<h5 id="（2）CQ配置命令"><a href="#（2）CQ配置命令" class="headerlink" title="（2）CQ配置命令"></a>（2）CQ配置命令</h5><table>
<thead>
<tr>
<th>命令格式</th>
<th>解释</th>
<th>配置模式</th>
</tr>
</thead>
<tbody><tr>
<td>queue-list <list-number></list-number></td>
<td>自定义列表</td>
<td>全局配置模式</td>
</tr>
<tr>
<td>custom-queue-list default</td>
<td>为那些不与任何规则匹配的报文指定一个缺省队列</td>
<td></td>
</tr>
<tr>
<td>custom-queue-list <list-number></list-number></td>
<td>将自定义列表应用到接口上</td>
<td>接口配置模式</td>
</tr>
</tbody></table>
<p><code>Router(config)#access-list 102 permit tcp any any eq ftp</code> </p>
<p><code>Router(config)#access-list 103 permit tcp any any eq www</code></p>
<p><code>Router(config)#queue-list 1 protocol ip 1 list 102</code></p>
<p><code>Router(config)#queue-list 1 protocol ip 2 list 103</code></p>
<p><code>Router(config-if)#priority-group 1</code></p>
<p><code>Router#show queueing</code></p>
<h5 id="（3）PQ配置命令"><a href="#（3）PQ配置命令" class="headerlink" title="（3）PQ配置命令"></a>（3）PQ配置命令</h5><table>
<thead>
<tr>
<th>命令格式</th>
<th>解释</th>
<th>配置模式</th>
</tr>
</thead>
<tbody><tr>
<td>priority-list <list-number></list-number></td>
<td>根据协议类型定义排队的优先级</td>
<td>全局配置模式</td>
</tr>
<tr>
<td>priority-group <list-number></list-number></td>
<td>将优先列表应用到接口上</td>
<td>接口配置模式</td>
</tr>
</tbody></table>
<p><code>Router(config)#ip access-list extended 101</code></p>
<p><code>Router(config-ext-nacl)#permit tcp any any eq www</code></p>
<p><code>Router(config)#ip access-list extended 102</code></p>
<p><code>Router(config-ext-nacl)#permit tcp any any eq ftp</code></p>
<p><code>Router(config)#priority-list 1 protocol ip high list 101  //根据协议类型排队的优先级</code></p>
<p><code>Router(config)#priority-list 1 protocol ip low list 102</code></p>
<p><code>Router(config-if)#priority-group 1 //将优先级列表应用到接口上</code></p>
<p><code>Router#show queueing   //查看PQ配置情况</code></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/08/22/QoS技术/">
    <time datetime="2019-08-22T03:59:53.513Z" class="entry-date">
        2019-08-22
    </time>
</a>
    
    
    </footer>
</article>


    
<nav class="nav-single">
    <h3 class="assistive-text">文章导航</h3>
    
        <span class="nav-previous"><a href="/2019/08/22/NAT/" rel="prev"><span class="meta-nav">←</span> (no title)</a></span>
    
    
        <span class="nav-next"><a href="/2019/08/21/PPP协议/" rel="next">(no title) <span class="meta-nav">→</span></a></span>
    
</nav><!-- .nav-single -->







</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="搜索" />
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/09/03/交换机工作原理及VLAN/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/09/03/WEB渗透/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/26/PIX防火墙配置/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/26/GRE（Generic Routing Encapsulation 通用路由封装协议）-VPN/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/08/22/NAT/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  
    
  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 zwy
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>